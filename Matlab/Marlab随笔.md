# Matlab

## 小结

- 支持向量机主要是用来解决分类问题，主要是二分类
- 聚类分析主要用于解决多元分类问题
- 主成分分析主要用于数据降维

## 常用命令

### 求多项式的根

### roots命令

作用：求多项式的根

格式：`r=roots(A)`

其中A是多项式的系数向量，从最高次项到零次项，中间没有的项系数写为0。

### format命令

格式：`format (格式名)`

一般有以下几种格式：

- short——5位近似定点数
- long——15位近似定点数
- hex——16进制数
- bank——银行格式，固定元和分
- rat——最小整数比例（分数）表示

格式名也可缺省不写，等同于short



### nargin与nargout

在调用函数时，MATLAB用两个永久变量nargin和nargout分别记录调用该函数时的输入实参和输出实参的个数。只要在函数文件中包含这两个变量，就可以准确地知道该函数文件被调用时的输入输出参数个数，从而决定函数如何进行处理。

例如：

```matlab
function fout=charray(a,b,c)
    if nargin==1
       fout=a;
    elseif nargin==2
       fout=(a+b)/2;
    elseif nargin==3
       fout=(a+b+c)/3;
    end
```

### global定义全局变量

一般来说matlab是不用定义变量的，类似python。

但是函数文件内部的变量是局部的，要想与其他函数文件共享，那么就需要用global关键字来定义全局变量了。

我们在命令行调用函数前要用global定义函数中使用的全局变量：

```matlab
global ALPHA BETA
x1=1;
x2=2;
y=f(x1,x2)
```

函数中也要声明全局变量：

```matlab
function y=f(a,b)
	global ALPHA BETA;	%使用全局变量的时候也要加global
	f=ALPHA*x1+BETA*y2;
end
```

我们在命令行调用函数前要用global定义函数中使用的

全局变量。

### inv()命令

格式：`inv(A)`

#### normplot()用来验证是否符合正态分布

绘制出来的是正态分位数图求矩阵A的逆矩阵

### impulse()函数

格式：`impulse()`



### normrnd()函数

有两种格式：

`normrnd(mu,sigma)`和`normrnd(mu,sigma，[size1,size2...,sizeN])`

功能：产生服从mu和sigma参数的正态分布的一个数或者是一组数。

#### normplot()用来验证是否符合正态分布

绘制出来的是正态分位数图

### dsolve命令

求微分方程的解析解



### cumsum()函数

用于返回一列或一行的积累量，具体请看文档



### repmat()函数

repeat matrix的简写，顾名思义就是生成重复的矩阵，具体请doc一下。

### all()函数

相当于与（&）函数，如果all(A)中的参数A的某一列的数值都是非零的，那么那一列的结果就是1，反之则为0。



### rng

用来指定随机数生成器，会影响rand，randi等随机数生成函数的结果。

### diff函数

可以用求一行向量相邻两项的差，也能用来求一个函数大致的导数，某个具体应用——书P89



## 第二章 整数规划

### intlinprog()函数

用于求解整数线性规划问题，其中有一个参数intcon是用来规定哪些下标的变量只能是整数的。

例如：X=[x1,x2,x3,x4,x5,x6]，其中x2, x3, x6只能取整数
intcon = [2,3,6]
如果所有变量都只能取整数，则：intcon = [1,2,3,4,5,6]; 比较方便的写法是:intcon = 1:6
如果只有x4取整数，则：intcon = 4;就是约束整形变量



## 第三章 非线性规划

> 匿名函数的用法，具体百度

### 非线性规划的Matlab解法

#### fmincon()函数



### 无约束问题的Matlab解法

#### jacobian()函数

求某个表达式的偏导数。

#### subs()函数

subs(s,old,new)，用新的值来替换s中老的值并计算。常用来带入表达式的某个点。

#### eig()函数

eig()函数用于求某个矩阵的特征值。

#### fminunc()函数和fminsearch()函数

都是求解无约束极小值的问题。

#### solve()函数

用于求解方程（组）的根。



### 约束极值问题

#### 二次规划

目标函数最高次数为2次，约束条件全为线性。

##### quadprog()函数



#### 构造惩罚函数



#### fminbnd函数



#### fseminf函数

#### fminmax函数



## 第四章 图与网络模型

求解最短路径的两个算法：

1. Dijkstra算法
2. Floyd算法



构造最小生成树的两个算法：

1. prim算法——选点
2. Kruskal算法——选边



## 第五章 插值与拟合

### 插值

#### 拉格朗日插值法



#### 样条插值



> MATLAB中插值一般可以用以下几种函数
>
> - interp1
> - spline
> - csape和fnval



## 第七章 数理统计

### 数理统计常用函数

#### mean函数

用于求平均值，默认是求每一列的平均值，指定参数2后求每一行的平均值。

#### std函数

用于求标准差

#### ttest()函数

用于进行单个总体，方差未知的t检验。

#### ttest2()

用于双样本，同均值，同方差但未知的t检验。

#### var()

求方差

#### vartest()

用于期望未知的方差检验

#### cdfcalc()

Calculate an empirical cumulative distribution function.

就是计算经验分布函数。

### Q-Q图

用于检验拟合优度

#### makedist()

定义正态分布

#### qqplot()

工具箱函数，直接画出Q-Q图

### Bootstrap方法

#### bootstrp()

用于求bootstrap方法的参数估计

#### bootci()

用于求bootstrap方法的置信区间



### 回归分析

#### 多元线性回归

**多元二项式回归**

rstool()函数



## 第八章 时间序列

### 确定性时间序列分析方法

- 长期趋势变动
- 季节变动
- 循环变动
- 不规则变动

#### 移动平均法



#### 平滑指数法



## 第九章 支持向量机

- 凸包的概念

- 训练集线性可分的定义



找到一个关于SVM中超平面的科普，感觉比较易懂（突然感觉到高数和线代的重要性，可惜都忘光了%>_<%）

https://blog.csdn.net/dengheCSDN/article/details/77313758

> 注意这里讲的超平面可能只是“仿射超平面”，因为如果就是超平面，那么线性性子空间，必过原点。
>
> 这两个“超平面”不是一个东西，不要搞混了。也不要纠结这个问题了。。。我们目前用的超平面就是“仿射超平面”。

总结一下支持向量机的要用到的知识：

- 高数中的向量、平面、空间等知识
- lagrange乘数法



### mapstd()

用于将矩阵的每一行数据标准化。



### SVM相关函数

#### 老版本的svm训练函数，预测函数

svmtrain()和svmclassify()

#### 新版本的svm

fitcsvm()和predict()





## 第十章 多元分析



#### mandist()

输入坐标矩阵，返回各点之间的绝对值距离。要注意的是一个点是一列。

#### tril()

返回一个矩阵的下三角矩阵

#### union()

返回两个矩阵合并后的向量，按大小排序，并消去了重复的项。

#### reshape()

顾名思义，重新排列矩阵。

### Q型聚类法

#### pdist()

可计算多种距离

#### squareform()

将行向量变成距离矩阵

#### linkage()

从距离矩阵中得到等级聚类树

#### dendrogram()

画出聚类图，输入为linkage得到的结果

#### cluster()

从链接输出(linkage)中创建聚类

#### zscore()

对数据矩阵进行标准化处理。

### R型聚类法



### K-means聚类算法

https://blog.csdn.net/huangfei711/article/details/78480078



### 主成分分析

> 主成分分析法主要用于数据降维，减少变量的个数。



#### 主成分回归分析

##### corrcoef()

`R = corrcoef(A)` returns the matrix of [correlation coefficients](corrcoef.html#bunkanr) for `A`, where the columns of `A` represent random variables and the rows represent observations.



##### pcacov()

输入相关系数矩阵，直接输出主成分分析的结果。



### 因子分析

> 也是降维。可看成主成分分析的推广，但是与主成分分析存在差异。
>
> 最主要的区别就是：
>
> - 主成分分析是用原变量的线性组合来构造新的综合变量——即主成分
> - 而因子分析是找出潜在的假想变量和随机影响变量，并用他们的线性组合来表示原变量。



#### 因子旋转

rotatefactors()





## 第十一章 偏最小二乘回归分析

> 预测类题目的方法

主要用于当一组自变量存在多重相关性（即，自变量之间是会相互影响的，存在线性关系，这样会影响参数估计的结果）、观测数据量较少（样本量较少）时的回归分析。





## 第十二章 现代优化算法

### 常用函数

#### distance()

用于求球体和椭圆体上两点的距离

#### ceil()

向正无穷取整





### 旅行商问题



### 模拟退火算法







## 第十四章 综合评价与决策方法

### 常用函数

#### norm()

norm(v)返回向量v的欧几里得规范

### TOPSIS

理想解是解决多属性决策的一种方法，他不是决定权重的方法，而是需要权重来评价各个方案（排序）。

![1567499588867](/home/doa/.config/Typora/typora-user-images/1567499588867.png)

这里有一种改进的TOPSIS算法（即改进了确定权重的方法）：

https://wenku.baidu.com/view/833d398202d276a200292e14.html



### 模糊综合评判法

这个方法用来解决事件本身概念不明确的的问题，例如：人事考核、葡萄酒评价（当然，这个问题不知这一种方法，也不一定是最优的方法）。它需要得出模糊综合判断矩阵(相当于权重)，这需要调研或者众人评分。

这个方法的对象是某一个方案，而不是对所有方案来排名，得出的结果是对某一个方案的评价，要想得出排名，可以多所有方案均使用这个方法计算一遍。



### 数据包络分析DEA

数据包络分析是评价一个具有**多指标输入**和**多指标输出**的系统。相当于评价这个系统的“产出/消耗比”or“效率”。

将不同方案变成不同的决策单元，分别计算每一个决策单元的“相对有效性”。

最突出的优点是无需假设任何权重。

DEA的妙点就在于计算特征值权重的方式。数据包络分析不是在我们运行分析之前设置特征值的权重然后决定它们的重要度，而是从数据来估量它们。此外，每个记录的权重都是不一样的！

DEA是如何选择权重的：我们试图通过选择合适的特征值权重来最大化每个记录的比率; 同时，我们必须确保，如果我们用相同的权重计算所有其他记录的比率，这些值都不能大于1。

![1567501644692](/home/doa/.config/Typora/typora-user-images/1567501644692.png)

https://cloud.tencent.com/developer/article/1031218

https://blog.csdn.net/qq_41686130/article/details/81866642

数据包络分析是评价多输入指标和多输出指标的较为有效的方法，将投入与产出进行比较。它的结果包含的意思有：

①θ=1，DEA有效，表示投入与产出比达到最优

②θ<1，非DEA有效，表示投入与产出比没有达到最优，一般来说，θ越大说明效果越好。





### 灰色关联分析法

通常可以运用此方法来分析各个因素对于结果的影响程度，也可以运用此方法解决随时间变化的综合评价类问题，其核心是按照一定规则确立随时间变化的母序列，把各个评估对象随时间的变化作为子序列，求各个子序列与母序列的[相关](https://wiki.mbalib.com/wiki/相关)程度，依照相关性大小得出结论。

要确定参考序列，即母序列。



### 主成分分析

该方法可以用来确定权重，



有关协方差、相关系数的理解：

https://blog.csdn.net/guomutian911/article/details/43317019

有关相关系数矩阵和特征值与主成分分析法的关系的理解：

http://www.chinacpda.com/news/6457.html



https://blog.csdn.net/lucylove3943/article/details/41686357



### 秩和比综合评价法

该方法先算出秩矩阵（秩就是某个指标中各个数据的排位）。然后算出秩和比RSR，将RSR排序后，再统计RSR的频率分布，然后转换成概率，再用回归拟合出RSR并（分档）排序。

RSR是非参数统计量。该方法用于某些多指标综合评价系统。

https://cloud.tencent.com/developer/news/16304



## 小技巧

- 一行公式太长了写不下可以在某个附后后面加上三个小数点，然后回车在下一行接着写，例如：

```matlab
    f=x(1)^2+x(2)^2+3*x(3)^2+4*x(4)^2+2*x(5)^2-8*x(1)-...
    2*x(2)-3*x(3)-x(4)-2*x(5);
```



- 直接对某个向量或者矩阵使用不等号比较就可以得到每个元素与不等号比较之后的逻辑结果。

- 对矩阵使用相等运算符==可以得到与原矩阵中每一个元素与等号右边的值是否相同的逻辑结果矩阵，大小与原矩阵相同。

## Matlab编程遇到的一些坑

### Octave和Matlab的数据互通问题

Octave的save命令保存的默认文件格式不能用Matlab打开，会报错。所以在Octave保存变量的时候要加一个参数'-mat7-binary'。实例：

```matlab
save('-mat7-binary','parameter_name');
```

